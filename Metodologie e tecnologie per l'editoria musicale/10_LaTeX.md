# TeX e LaTeX: Paradigmi e Motivazioni
L'introduzione a **TeX** e **LaTeX** all'interno di un corso di editoria musicale e informatica non è casuale, ma risponde all'esigenza di apprendere un paradigma di scrittura originale basato sulla separazione tra contenuto e stile. A differenza dei comuni word processor (come Microsoft Word), questo sistema si basa sul concetto di **testo strutturato**: l'autore si concentra sul significato logico di ciò che scrive (ad esempio, definendo cosa è un titolo e cosa è un paragrafo), mentre l'aspetto grafico viene gestito automaticamente dal software attraverso dei modelli (template). Questo approccio è lo standard richiesto dagli editori scientifici per la stesura di articoli e, nello specifico del Laboratorio di Informatica Musicale, è la tecnologia richiesta per la stesura della tesi di laurea. Tra i vantaggi principali vi sono la gestione eccellente di formule matematiche complesse, la creazione automatica di indici e bibliografie e, per l'ambito musicale, la possibilità di integrare notazione ed esempi musicali eleganti (ad esempio tramite pacchetti come `gregoriotex`). Di contro, l'approccio non è immediato: il risultato non è visibile in tempo reale e richiede una fase di apprendimento del codice.
### Cenni Storici e Architettura del Sistema
**TeX** (che si pronuncia "Tek", dalla radice greca *téchnē*) è un programma di tipografia digitale creato nel 1978 dal matematico e informatico **Donald Knuth** per ovviare alla scarsa qualità dell'editoria scientifica dell'epoca. È un software libero, noto per la sua stabilità (la numerazione delle versioni converge verso il pigreco). **LaTeX**, invece, è un linguaggio basato su TeX che ne semplifica l'utilizzo attraverso un set di macro predefinite.
Per comprendere il funzionamento del sistema, è utile distinguere i vari livelli che lo compongono: esistono le **distribuzioni** (collezioni di software come MiKTeX o TeX Live), gli **editor/frontend** (le interfacce dove si scrive il codice, come TeXShop o TeXworks), i **motori** (gli eseguibili che compilano il codice, es. pdfTeX) e infine i **formati** e i **pacchetti** (estensioni che aggiungono funzionalità specifiche).
### Il Workflow: WYSIWYM e Strumenti
La filosofia alla base di LaTeX è riassunta dall'acronimo **WYSIWYM** (*What You See Is What You Mean*), in contrapposizione al classico WYSIWYG (*What You See Is What You Get*). In pratica, si scrive un codice sorgente in *plain text* che deve subire un processo di **compilazione** per produrre un file di output (solitamente un PDF). Sebbene sia possibile installare tutto il software necessario in locale (su Windows, macOS o Linux), per il corso si fa riferimento principalmente a **Overleaf**, un editor online che permette di scrivere, gestire progetti e compilare il codice direttamente via browser, facilitando la gestione delle librerie e la collaborazione.
### Struttura di un Documento LaTeX
Un documento LaTeX è strutturato in modo rigido. La prima istruzione è sempre `\documentclass{...}`, che definisce il tipo di documento (ad esempio `article`, `book` o `report`) e ne determina l'impostazione grafica generale. Tutto ciò che precede l'inizio vero e proprio del testo, marcato dal comando `\begin{document}`, è chiamato **preambolo**.
Nel preambolo si impostano i parametri globali (come la dimensione del font o il formato della carta), si caricano i **pacchetti** necessari per estendere le funzioni base (usando il comando `\usepackage{...}`, fondamentale ad esempio per gestire le immagini) e si definiscono i metadati come titolo, autore e data. È importante notare che questi metadati, pur essendo definiti nel preambolo, vengono visualizzati nel documento finale solo se si inserisce il comando `\maketitle` all'interno del corpo del testo (dopo `\begin{document}`).
### Scrittura, Formattazione e Commenti
All'interno del corpo del documento, il testo viene gestito in paragrafi. Una particolarità di LaTeX è che un singolo "a capo" nel codice sorgente viene interpretato come uno spazio semplice; per creare un nuovo paragrafo è necessario lasciare una **riga vuota** nel codice. Esistono comandi per l'interruzione di riga manuale (`\\` o `\newline`), ma il loro uso andrebbe limitato. Per la formattazione del testo, si utilizzano comandi specifici che racchiudono il testo tra parentesi graffe: `\textbf{...}` per il grassetto, `\textit{...}` per il corsivo, `\underline{...}` per il sottolineato e `\texttt{...}` per il carattere *monospaced*. Un comando interessante è `\emph{...}`, che applica l'enfasi in modo contestuale (ad esempio trasformando il tondo in corsivo, o viceversa se si è già in un blocco corsivo). Il codice può essere commentato utilizzando il simbolo percentuale `%`: tutto ciò che segue questo simbolo sulla stessa riga viene ignorato dal compilatore.
### Organizzazione Gerarchica e Riferimenti Incrociati
La potenza di LaTeX emerge nella gestione della struttura. Il documento viene diviso gerarchicamente tramite comandi come `\section{...}`, `\subsection{...}`, `\chapter{...}` (per i libri). Questi elementi vengono numerati automaticamente dal sistema (a meno che non si usi la versione "stellata" del comando, es. `\section*{...}`, che sopprime la numerazione). Grazie a questa marcatura semantica, è possibile generare un indice completo e aggiornato semplicemente inserendo il comando `\tableofcontents` nel punto desiderato.
Infine, LaTeX gestisce in modo eccellente i **riferimenti incrociati**. È possibile assegnare un'etichetta univoca a sezioni, immagini o tabelle tramite il comando `\label{nome_etichetta}`. Per richiamare quel punto nel testo, si usano i comandi `\ref{nome_etichetta}` (per ottenere il numero della sezione/figura) o `\pageref{nome_etichetta}` (per il numero di pagina). È buona norma usare prefissi nelle etichette (come `sec:`, `fig:`, `tab:`) per ricordarne la funzione. Un dettaglio di stile suggerito è l'uso della tilde `~` prima del comando di riferimento (es. `Sez.~\ref{...}`) per inserire uno spazio "non-breaking", che impedisce al numero di finire a capo da solo, separandosi dalla parola che lo precede.
***
## Il Concetto di Ambiente in LaTeX
Dopo aver appreso i comandi base, il passo successivo per strutturare un documento è l'utilizzo degli **ambienti** (*environments*). Se i comandi semplici agiscono su argomenti racchiusi tra graffe, gli ambienti applicano una specifica formattazione o un comportamento logico a un'intera sezione di contenuto delimitata da due tag specifici: `\begin{nome_ambiente}` e `\end{nome_ambiente}`. Tutto ciò che è compreso tra questi due comandi subisce l'effetto dell'ambiente. Un esempio elementare è l'ambiente `center`, che centra orizzontalmente tutto il testo o gli oggetti al suo interno, annullando l'allineamento a sinistra o giustificato predefinito.
### Gestione degli Elenchi
LaTeX gestisce in modo eccellente le liste, che sono un esempio classico di ambiente. Ne esistono principalmente di due tipi:
* **Elenchi puntati (`itemize`):** Creano una lista non ordinata dove ogni voce, introdotta dal comando `\item`, è preceduta da un simbolo (di default un pallino nero, o *bullet*).
* **Elenchi numerati (`enumerate`):** Creano una lista ordinata progressiva (1, 2, 3...). Una funzionalità avanzata utile è la possibilità di modificare il contatore iniziale: inserendo il comando `\addtocounter{enumi}{x}` (dove *x* è un numero intero) subito dopo l'apertura dell'ambiente, è possibile far partire la numerazione da un valore diverso da 1.
Oltre a utilizzare quelli predefiniti, è possibile creare **nuovi ambienti** personalizzati tramite il comando `\newenvironment` inserito nel preambolo. Questo permette di definire una volta sola il codice da eseguire all'apertura e alla chiusura dell'ambiente (ad esempio, formattare una citazione con margini specifici e linee decorative), garantendo coerenza stilistica in tutto il documento.
### Inserimento e Gestione delle Immagini
Per inserire immagini è necessario includere nel preambolo il pacchetto `graphicx`. Il comando base è `\includegraphics{nome_file}`, che supporta vari formati. Un consiglio pratico per l'ambito musicale riguarda l'esportazione da software come **MuseScore**: se possibile, è preferibile esportare le partiture in formato vettoriale (PDF) anziché raster (PNG) per mantenere la massima qualità in fase di stampa.

Le immagini in LaTeX vengono solitamente gestite all'interno dell'ambiente `figure`. Questo ambiente è un "oggetto flottante" (*float*): significa che LaTeX deciderà autonomamente dove posizionare l'immagine per ottimizzare l'impaginazione. Tuttavia, l'utente può suggerire una priorità di posizionamento tramite parametri tra parentesi quadre: `h` (*here*, qui), `t` (*top*, in alto), `b` (*bottom*, in basso) o `p` (*page*, in una pagina dedicata).
All'interno di `figure` si definiscono anche la didascalia (`\caption{...}`) e l'etichetta (`\label{...}`) per i riferimenti incrociati. È fondamentale ricordare che non si deve mai scrivere nel testo "come si vede nella figura sotto", poiché l'immagine potrebbe essere spostata dal compilatore; bisogna invece usare i riferimenti dinamici (`\ref{...}`).
### Inserimento di Codice Sorgente
Per chi deve documentare software o algoritmi, LaTeX offre diversi livelli di gestione del codice, accomunati dall'uso di font monospaziati:
1. **Comando `\texttt{...}`:** Utile per brevissimi frammenti in linea col testo (es. nomi di variabili).
2. **Ambiente `verbatim`:** Mantiene la formattazione esatta del testo (spazi e a capo) ma non evidenzia la sintassi.
3. **Pacchetto `listings`:** È la soluzione professionale. Permette di importare codice da file esterni o scriverlo direttamente nell'ambiente `lstlisting`, supportando la colorazione della sintassi (*syntax highlighting*) per moltissimi linguaggi (Python, C, Java, HTML, ecc.).
### Raffinatezze Tipografiche e Gestione degli Spazi
Per ottenere un documento professionale, è necessario curare i dettagli, spesso gestiti tramite caratteri speciali o pacchetti specifici:
* **Lingua:** Importare il pacchetto `babel` con opzione `italian` (`\usepackage[italian]{babel}`) è essenziale affinché le etichette automatiche appaiano come "Figura" e "Tabella" anziché "Figure" e "Table".
* **Caratteri Speciali:** Alcuni caratteri hanno un significato sintattico in LaTeX (come `&` nelle tabelle o `%` per i commenti). Per stamparli nel testo, devono essere preceduti da un backslash (es. `\&`).
* **Gestione degli Spazi:** LaTeX incrementa leggermente lo spazio dopo un punto fermo. Nelle abbreviazioni (es. "S. Bach"), questo effetto è indesiderato e si corregge inserendo un backslash e uno spazio (`\ `) dopo il punto.
* **Spazio Non-Breaking (`~`):** La tilde è fondamentale nei riferimenti (es. `Fig.~1`). Inserisce uno spazio che impedisce al numero di andare a capo da solo, tenendolo legato alla parola che lo precede.
* **Spazio Sottile (`\,`):** Utile per separare i numeri dalle unità di misura (es. `3\,cm`).
### Errori Comuni da Evitare
Concludendo la panoramica sugli ambienti, è bene fissare alcuni errori tipici del principiante da evitare:
1. **Abuso di `\\`:** Non usare il doppio backslash per andare a capo alla fine di ogni riga. Per cambiare paragrafo serve una riga vuota nel codice; usare `\\` crea un unico paragrafo "spezzato" che rovina l'indentazione e la giustificazione.
2. **Forzatura del Layout:** Non cercare di replicare manualmente l'impaginazione di Word. Bisogna fidarsi dell'algoritmo di LaTeX per il posizionamento di figure e testo.
3. **Riferimenti Vaghi:** Evitare riferimenti spaziali ("sopra", "sotto"); usare sempre il sistema `\label` e `\ref`.